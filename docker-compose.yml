services:
  db:
    image: neondatabase/neon_local:latest
    container_name: mgn-neon-local
    ports:
      - "5432:5432"
    environment:
      NEON_API_KEY: ${NEON_API_KEY}
      NEON_PROJECT_ID: ${NEON_PROJECT_ID}
      # Choose ONE of the following for branch behavior:
      # BRANCH_ID: ${BRANCH_ID}            # connect to an existing branch
      # PARENT_BRANCH_ID: ${PARENT_BRANCH_ID}  # create ephemeral branch from parent
      # DELETE_BRANCH: ${DELETE_BRANCH:-true}  # set false to persist ephemeral branches
    # Optional: persist a branch per Git branch
    # volumes:
    #   - ./.neon_local/:/tmp/.neon_local
    #   - ./.git/HEAD:/tmp/.git/HEAD:ro,consistent
